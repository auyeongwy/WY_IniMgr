[TOC]
Introduction
============
WY_IniMgr is a C library that provides a simple API to read values from a ini file of the form:

Variable 1 = Value 1 <br>
Variable 2 = Value 2 <br>

This library has the following key characteristics:
- The library is developed on a Linux system and excludes using regular expression functions from regex.h so it can be easily compiled on Windows systems without the need to get the associated PCRE library. 
- It adheres to using standard C functions to make re-building on other systems easy.
- Implement write functions in addition to read functions so users can read and write to INI files.  
- Uses the MIT license so it is easy to incorporate in any application.
- Consciously developed with a simple-to-use API to make it super-easy to use in any application. 

File Organisation
=================
There are 3 directories in the base directory: 

src: All the source files are here. <br>
build: All build files, including the executable, are here. The Makefile is located here as well. <br>
doc: All documentation files are here. HTML Documentation is generated by Doxygen. So only a README and a Doxyfile are under version control in this directory. Users should run "doxygen" in this directory to generate the code documentation.

Compilation and Usage
=====================
To build the library and application, just go into the build directory and enter "make". This generates:
1. A library lib_WY_IniMgr.a
2. A demo application named demo

How to use the library:
1. Modify selected definitions in WY_IniDefs.h if necessary. If this file is modified, the library must be re-compiled.
2. Include WY_IniMgr.h in your code. 
3. Link to lib_WY_IniMgr.a in your build.
4. That's it.

For an example, refer to demo.c. This is the best illustration to how to use the library.

The supplied Makefile defaults to using the following compiler flags. Modify them as required to suit your own build system.<br>
`-std=c17 -Wall -O2 -march=native`

Implementation Details
======================

Reading values from a file
-------------------------- 
-# Call wyini_init() to initialise the internal buffers in the library.
-# Some limits on internal buffer sizes are defined in WY_IniDefs.h. So to change the limits, this file needs to be modified and the library re-compiled.
-# Call wyini_open() to open a file. This reads the content into a dynamically allocated internal buffer.
-# Call wyini_get_var_val() to read a variable-value pair of the form var=val.
-# The library parses the content line-by-line by looking for a '\n' character.
-# The library discards trailing whitespace in every line after the var=val pattern. E.g. "var=value   " will be read as "var=value".
-# Do not quote values if the quotes are not required. E.g. var1 = "value in var1". The library will actually copy the double quotes as part of the variable's value.
-# Call wyini_clean() to clean up all internal buffers when done parsing the file content.
-# Note: The file is only opened and closed with wyini_open(). All subsequent function calls only operate on the internal buffers maintained by the WY_IniMgr library. So there is actually no more system IO after this function call.

Writing values to a file
------------------------ 
-# The mechanics for writing to a file is almost identical to reading values from a file, save that we have use other API functions to perform the write operations.
-# After file content is read into the internal buffer with wyini_open(), call wyini_write_val() to write values to existing varaiables.
-# The library will automatically look for a valid "var=" pattern in order to write the new value. If the var is not found, the function call will fail.
-# If writes to the internal buffers result in exceeding the file size limitations defined by wyini_open(), the writes will fail.  
-# Note: The file is only opened and closed with wyini_open(). All subsequent function calls only operate on the internal buffers maintained by the WY_IniMgr library. So there is actually no more system IO after this function call.
-# To save the buffer content to a file, call wyini_save().
-# Call wyini_clean() to clean up all internal buffers when done parsing the file content.
